<% provide(:title, 'ユーザー登録情報') %>

<div class="container">
  <h2 class="title">ユーザー登録情報</h2>

  <div class="user-info-wrapper">
    <ul class="user-info">
      <li>氏名：<%= @user.name %></li><br>
      <li>メールアドレス：<%= @user.email %></li><br>
      <li>所属部署：<%= @user.category.name %></li>
    </ul>
    <% if @user == current_user %>
    <div class="btn-list">
      <a class="btn-user-edit" data-toggle="modal" data-target="#testModal">
        編集
      </a>
      <%= link_to "削除", @user, method: :delete, data: { confirm: "本当に削除しますか?" }, class:"btn-user-edit" %>
    </div>
    <% end %>
  </div>

  <% if @user.category_id == 6 %>
  <div class="related-info-wrapper">
    <div class="related-info row">
      <div class="col-sm-4">
        <%= link_to "担当荷役 (#{@user.orders.count})", user_path(@user),
          data: { value: :orders, method: :get, remote: true }, class:"current" %>
      </div>
      <div class="col-sm-4">
        <%= link_to "ブックマークした工事 (#{@orders_constructions.count})", user_path(@user), data: { value: :orders_construction, method: :get, remote: true } %>
      </div>
      <div class="col-sm-4">
        <%= link_to "投稿コメント (#{@user.orders.count})", user_path(@user), data: { value: :comments, method: :get, remote: true } %>
      </div>
      <span id="slide-line"></span>
    </div>
  </div>
  <% else %>
  <div class="related-info-wrapper">
    <div class="related-info row">
      <div class="col-sm-6">
        <%= link_to "担当工事 (#{@constructions.count})", user_path(@user), data: { value: :constructions, method: :get, remote: true} , class:"current" %>
      </div>
      <div class="col-sm-6">
        <%= link_to "投稿コメント (#{@user.orders.count})", user_path(@user), data: { value: :comments, method: :get, remote: true } %>
      </div>
      <span id="slide-line"></span>
    </div>
  </div>
  <% end %>

  <div id="info-table-partial">
    <% if @user.category_id == 6 %>
    <%= render 'orders' %>
    <% else %>
    <%= render 'constructions' %>
    <% end %>
  </div>
</div>

<%= render 'edit' %>