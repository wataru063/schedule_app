<% provide(:title, '入出荷設備登録') %>

<div class="container">
  <div class="title">
    <h1>入出荷設備登録</h1>
  </div>

  <div class="row facility-row">
    <div class="col-md-6 col-md-offset-3">
      <%= form_for(@facility, url: facility_path) do |f| %>
      <%= render 'shared/error_messages', object: f.object  %>

      <%= f.label :name, '設備名', class:'form-label-login'%>
      <%= f.text_field :name, class: 'form-control' %>
      <%= f.fields_for :relate_to_oils do |ff| %>
      <div class=" form-group">
        <%= ff.label :oil_id, '対応油種', class:'form-label-login'%>
        <div id="input_pluralBox">
          <div id="input_plural">
            <%= ff.collection_select :oil_id, Oil.all, :id, :name, {}, class: 'form-control side' %>
            <i class="add pluralBtn fas fa-2x fa-plus-circle side"></i>
            <i class="del pluralBtn fas fa-2x fa-minus-circle side"></i>
          </div>
        </div>
      </div>
      <% end %>

      <%= f.submit "登録", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
</div>

</div>

<script type="text/javascript">
  $(document).on("click", ".add", function() {
    $(this).parent().clone(true).insertAfter($(this).parent());
  });
  $(document).on("click", ".del", function() {
    var target = $(this).parent();
    if (target.parent().children().length > 1) {
      target.remove();
    }
  });
</script>